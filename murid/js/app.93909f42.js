(function(t){function e(e){for(var a,i,c=e[0],s=e[1],l=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/murid/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;o.push([1,"chunk-vendors"]),n()})({0:function(t,e){},1:function(t,e,n){t.exports=n("56d7")},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[t.hasIdentity?n("v-app-bar",{attrs:{app:"",color:"primary",dark:"",dense:"","extension-height":"4"}},[n("v-toolbar-title",{staticClass:"mr-12 align-center"},[n("span",{staticClass:"title"},[t._v(t._s(t.title))])]),n("v-spacer"),n("v-btn",{attrs:{icon:"",to:"/logout"}},[n("v-icon",[t._v("mdi-exit-run")])],1),n("v-progress-linear",{staticClass:"ma-0",attrs:{slot:"extension",active:t.loading,color:"red",indeterminate:""},slot:"extension"})],1):t._e(),n("v-content",[n("router-view")],1)],1)},o=[],i={name:"App",data:function(){return{}},computed:{hasIdentity:function(){return this.$store.state.hasIdentity},title:function(){return this.$store.state.toolbar.title},loading:function(){return this.$store.state.loading}},mounted:function(){var t=document.getElementById("logo-loading");t.parentNode.removeChild(t)}},c=i,s=n("2877"),l=n("6544"),u=n.n(l),d=n("7496"),p=n("40dc"),m=n("8336"),v=n("a75b"),h=n("132d"),f=n("8e36"),g=n("2fa4"),b=n("2a7f"),w=Object(s["a"])(c,r,o,!1,null,null,null),y=w.exports;u()(w,{VApp:d["a"],VAppBar:p["a"],VBtn:m["a"],VContent:v["a"],VIcon:h["a"],VProgressLinear:f["a"],VSpacer:g["a"],VToolbarTitle:b["a"]});var _=n("f309");a["a"].use(_["a"]);var k=new _["a"]({}),x=(n("45fc"),n("b0c0"),n("8c4f")),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{directives:[{name:"show",rawName:"v-show",value:"home"===t.activeSection,expression:"'home'===activeSection"}]},[n("v-col",{attrs:{cols:"12"}},[n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"1"}},[n("v-icon",[t._v("mdi-clipboard-text")])],1),n("v-col",{attrs:{cols:"9"}},[t._v(" "+t._s(t.assignmentName)+" ")]),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.dlgDesc=!0}}},[n("v-icon",[t._v("mdi-help-circle")])],1)],1)],1),n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"1"}},[n("v-icon",[t._v("mdi-account")])],1),n("v-col",{attrs:{cols:"9"}},[t._v(" "+t._s(t.name)+" ")]),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:t.btnEditNameClick}},[n("v-icon",[t._v("mdi-pencil")])],1)],1)],1),n("v-row",{attrs:{align:"center"}},[n("v-col",{attrs:{cols:"1"}},[n("v-icon",[t._v("mdi-stack-overflow")])],1),n("v-col",{attrs:{cols:"9"}},[t._v(" "+t._s(t.pages)+" halaman ")]),n("v-col",{attrs:{cols:"1"}},[n("v-btn",{attrs:{icon:"",disabled:t.loading},on:{click:t.btnAddPhotoClick}},[n("v-icon",[t._v("mdi-camera-plus")])],1)],1)],1),n("v-row",{directives:[{name:"show",rawName:"v-show",value:t.pages>0,expression:"pages>0"}],staticClass:"mt-4",attrs:{align:"center"}},[n("v-col",{attrs:{cols:"12",align:"center"}},[n("v-btn",{staticClass:"mx-2",attrs:{color:"primary",disabled:t.loading},on:{click:t.btnResetClick}},[t._v(" Reset "),n("v-icon",{attrs:{right:""}},[t._v("mdi-restore")])],1),n("v-btn",{staticClass:"mx-2",attrs:{color:"primary",loading:t.loading},on:{click:t.btnSendClick}},[t._v(" Kirim "),n("v-icon",{attrs:{right:""}},[t._v("mdi-send")])],1)],1)],1),n("v-row",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{align:"center",justify:"center"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:0===t.percent,expression:"0===percent"}]},[t._v("Persiapan...")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.percent>0,expression:"percent>0"}]},[t._v("Upload: "+t._s(t.percent)+"%")])])],1)],1),n("v-row",{directives:[{name:"show",rawName:"v-show",value:"404"===t.activeSection,expression:"'404'===activeSection"}],attrs:{align:"center",justify:"center"}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("v-icon",{attrs:{"x-large":"",color:"orange darken-2"}},[t._v("mdi-hand")])],1),n("v-col",{attrs:{cols:"12"}},[t._v(" Tidak ada pekerjaan rumah dengan link ini! ")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("input",{ref:"photo",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:t.onFileChange}})]),n("v-dialog",{attrs:{"max-width":"320px"},model:{value:t.dlgDesc,callback:function(e){t.dlgDesc=e},expression:"dlgDesc"}},[n("v-card",[n("v-card-text",[t._v(t._s(t.description))]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dlgDesc=!1}}},[t._v("Ok")])],1)],1)],1)],1)},I=[],C=(n("a4d3"),n("e01a"),n("99af"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("96cf"),n("1da1")),T=n("e511"),O=n("b5e8"),E=n.n(O),D="us-east-1",V="tugas-belajar",j="https://s3.eu-central-1.wasabisys.com",N="DAT2D6EBHKNCWHIFYDDC",P="y0YYhBQRLbVlbiEQ2YfH5OZsrMIZ992DRnoKybJ5",A=(n("1276"),n("31ce")),B=n.n(A);n("a15b"),n("d81d"),n("b64b"),n("498a"),n("b85c"),n("1c46"),n("b383"),n("df7c");function R(){B.a.config.region=D,B.a.config.s3={endpoint:j,s3ForcePathStyle:!0},B.a.config.accessKeyId=N,B.a.config.secretAccessKey=P,B.a.config.signatureVersion="v4",B.a.config.s3ForcePathStyle=!0}var $="hwstd";function L(){var t={},e="".concat($,":name"),n=localStorage.getItem(e);if(null!==n){e="".concat($,":pin");var a=localStorage.getItem(e);return null===a&&(a="",localStorage.setItem(e,a)),t.name=n,t.pin=a,t}}function U(t,e){var n="".concat($,":name");localStorage.setItem(n,t),n="".concat($,":pin"),localStorage.setItem(n,e)}function q(){var t="".concat($,":name");localStorage.removeItem(t),t="".concat($,":pin"),localStorage.removeItem(t)}var Y={name:"Home",data:function(){return{assignment:null,assignmentId:null,assignmentName:"",description:"",name:"",pin:"",myfile:null,pdfDoc:null,pages:0,percent:0,managedUpload:null,activeSection:"home",dlgDesc:!1,loading:!1}},watch:{$route:function(t,e){var n=this;this.checkBucket().then((function(){n.loadData()})).catch((function(t){console.log(t)}))}},created:function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("SET_TOOLBAR",{title:"Pekerjaan Rumah"}),R(),e=new E.a,this.$store.commit("SET_LOADING",!0),n={Bucket:V},t.prev=5,t.next=8,e.headBucket(n).promise();case 8:t.next=22;break;case 10:return t.prev=10,t.t0=t["catch"](5),console.log(t.t0),t.prev=13,t.next=16,e.createBucket(n).promise();case 16:console.debug(V,"has been created"),t.next=22;break;case 19:t.prev=19,t.t1=t["catch"](13),console.log(t.t1);case 22:return t.next=24,this.loadData();case 24:this.$store.commit("SET_LOADING",!1);case 25:case"end":return t.stop()}}),t,this,[[5,10],[13,19]])})));function e(){return t.apply(this,arguments)}return e}(),methods:{loadData:function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=L(),this.name=e.name,this.pin=e.pin,this.assignmentId=this.$route.query.a,void 0!==this.assignmentId){t.next=7;break}return this.activeSection="404",t.abrupt("return");case 7:return n=new E.a,a={Bucket:V,Key:"a/".concat(this.assignmentId,".json")},t.prev=9,t.next=12,n.getObject(a).promise();case 12:r=t.sent,this.assignment=JSON.parse(r.Body.toString("utf-8")),this.assignmentName=this.assignment.name,this.description=this.assignment.description,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](9),console.error(t.t0),this.activeSection="404";case 22:case"end":return t.stop()}}),t,this,[[9,18]])})));function e(){return t.apply(this,arguments)}return e}(),btnEditNameClick:function(){var t=prompt("Edit nama",this.name);null!==t&&(this.name=t,U(this.name,this.pin))},btnAddPhotoClick:function(){this.$refs.photo.click()},resizeAndAddToPdf:function(t){var e=this;return new Promise((function(n,a){var r=new FileReader;r.onload=function(){var t=new Image;t.onload=function(){var a=document.createElement("canvas"),r="p";a.width=1024,a.height=1448;var o=210,i=297;t.height<t.width&&(r="l",a.width=1448,a.height=1024,o=297,i=210);var c=a.getContext("2d");c.drawImage(t,0,0,a.width,a.height),null===e.pdfDoc?e.pdfDoc=new T(r,"mm","a4"):e.pdfDoc.addPage("a4",r),e.pdfDoc.addImage(a.toDataURL("image/jpeg"),"JPEG",0,0,o,i),e.pages=e.pages+1,n()},t.src=r.result},r.readAsDataURL(t)}))},onFileChange:function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.target.files.length<1)){t.next=2;break}return t.abrupt("return");case 2:this.loading=!0,n=0;case 4:if(!(n<e.target.files.length)){t.next=10;break}return t.next=7,this.resizeAndAddToPdf(e.target.files[n]);case 7:n++,t.next=4;break;case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),btnSendClick:function(){var t=Object(C["a"])(regeneratorRuntime.mark((function t(){var e,n,a,r,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==this.pdfDoc){t.next=2;break}return t.abrupt("return");case 2:if(0!==this.pages){t.next=4;break}return t.abrupt("return");case 4:return e="",e=""===this.pin?"".concat(this.name,".pdf"):"".concat(this.name," ").concat(this.pin,".pdf"),n=new E.a,a="a/".concat(this.assignmentId,"/").concat(e),r=this.pdfDoc.output("blob"),o={Bucket:V,Key:a,ContentType:"application/pdf",Body:r},this.managedUpload=n.upload(o),i=this,this.managedUpload.on("httpUploadProgress",(function(t){i.percent=Math.round(100*t.loaded/t.total)})),this.percent=0,this.loading=!0,t.prev=15,t.next=18,this.managedUpload.promise();case 18:this.loading=!1,this.pdfDoc=null,this.pages=0,c=n.getSignedUrl("getObject",{Bucket:V,Key:a,Expires:86400}),this.$router.replace({name:"success",query:{u:btoa(c)}}),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](15),console.error(t.t0),this.loading=!1;case 29:case"end":return t.stop()}}),t,this,[[15,25]])})));function e(){return t.apply(this,arguments)}return e}(),btnResetClick:function(){var t=window.confirm("Yakin mereset?");t&&(this.pdfDoc=null,this.pages=0)}}},F=Y,H=n("b0af"),K=n("99d9"),M=n("62ad"),G=n("a523"),J=n("169a"),z=n("0fd9"),Q=Object(s["a"])(F,S,I,!1,null,null,null),Z=Q.exports;u()(Q,{VBtn:m["a"],VCard:H["a"],VCardActions:K["a"],VCardText:K["b"],VCol:M["a"],VContainer:G["a"],VDialog:J["a"],VIcon:h["a"],VRow:z["a"],VSpacer:g["a"]});var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height",attrs:{"justify-center":"",fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-card",{staticClass:"elevation-12"},[n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Nama Siswa",name:"name",type:"text",clearable:"","prepend-icon":"mdi-account",readonly:t.loading},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("v-text-field",{attrs:{label:"Nomor PIN (opsional)",name:"pin",type:"number",clearable:"","prepend-icon":"mdi-lock",readonly:t.loading},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.btnSaveIdClick}},[t._v(" Save "),n("v-icon",{attrs:{right:""}},[t._v("mdi-content-save")])],1)],1)],1)],1)],1)},X=[],tt={name:"Identity",data:function(){return{name:"",pin:"",assignmentId:"",loading:!1}},created:function(){},methods:{btnSaveIdClick:function(){""!==this.name&&(U(this.name,this.pin),this.$store.commit("SET_HAS_IDENTITY",!0),Object.prototype.hasOwnProperty.call(this.$route.query,"redirect")?this.$router.replace(this.$route.query.redirect):this.$router.replace("/"))}}},et=tt,nt=n("4bd4"),at=n("8654"),rt=Object(s["a"])(et,W,X,!1,null,"7b62abe2",null),ot=rt.exports;u()(rt,{VBtn:m["a"],VCard:H["a"],VCardActions:K["a"],VCardText:K["b"],VContainer:G["a"],VForm:nt["a"],VIcon:h["a"],VRow:z["a"],VSpacer:g["a"],VTextField:at["a"]});var it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("h3",[t._v("Upload sukses!")])]),n("v-row",[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("v-btn",{staticClass:"mt-3",attrs:{color:"primary",href:t.pdfUrl,target:"_blank"}},[t._v(" Lihat salinan "),n("v-icon",{attrs:{right:""}},[t._v("mdi-eye")])],1)],1)],1)],1)},ct=[],st={name:"Success",data:function(){return{}},computed:{pdfUrl:function(){return atob(this.$route.query.u)}},created:function(){this.$store.commit("SET_TOOLBAR",{title:"Pekerjaan Rumah"})},methods:{}},lt=st,ut=Object(s["a"])(lt,it,ct,!1,null,null,null),dt=ut.exports;u()(ut,{VBtn:m["a"],VCol:M["a"],VContainer:G["a"],VIcon:h["a"],VRow:z["a"]});var pt=n("2f62");a["a"].use(pt["a"]);var mt={name:"",pin:"",hasIdentity:!1,toolbar:{title:"PeEeerr!",backButton:!1},booting:!0,loading:!1},vt={SET_CREDENTIALS:function(t,e){e.name&&(t.name=e.name),e.pin&&(t.pin=e.pin)},SET_HAS_IDENTITY:function(t,e){t.hasIdentity=e},SET_TOOLBAR:function(t,e){t.toolbar.title=e.title,Object.prototype.hasOwnProperty.call(e,"backButton")?t.toolbar.backButton=e.backButton:t.toolbar.backButton=!1},SET_BOOTING:function(t,e){t.booting=e},SET_LOADING:function(t,e){t.loading=e}},ht={},ft=new pt["a"].Store({state:mt,mutations:vt,actions:ht});function gt(t,e,n){q(),ft.commit("SET_HAS_IDENTITY",!1),ft.commit("SET_CREDENTIALS",{name:"",pin:""}),n("/identity")}a["a"].use(x["a"]);var bt=[{path:"/",name:"home",component:Z,meta:{requiresIdentity:!0}},{path:"/identity",name:"identity",component:ot},{path:"/success",name:"success",component:dt,meta:{requiresIdentity:!0}},{path:"/logout",name:"logout",beforeEnter:gt}],wt=new x["a"]({routes:bt});wt.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requiresIdentity}))?ft.state.hasIdentity?n():n({path:"/identity",query:{redirect:t.fullPath}}):"identity"===t.name&&ft.state.hasIdentity?n("/"):n()}));var yt=wt;function _t(){var t=L();t&&ft.commit("SET_HAS_IDENTITY",!0),new a["a"]({router:yt,store:ft,vuetify:k,render:function(t){return t(y)}}).$mount("#app")}a["a"].config.productionTip=!1,_t()}});
//# sourceMappingURL=app.93909f42.js.map